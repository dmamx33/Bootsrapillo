<!DOCTYPE html>
<html lang="en">

<head>
  <title>Weather Station</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="bootstrap.min.css">
  <script src="https://code.highcharts.com/highcharts.js"></script>
</head>

<!-- jumbotron "https://i.ibb.co/4N8XXjh/frame7.png" -->

<body>
  <div class="container">
    <style>
  .jumbotron {
    background: url("https://i.ibb.co/RH3ssCR/frame7.png");
    height: 100%;
    /* You must set a specified height */
    background-position: left bottom; /* Center the image */
    background-repeat: no-repeat;
    /* Do not repeat the image */
    background-size: cover;
  }

  /* .jumbotron {
    background-image: url(https://i.ibb.co/5jM9DC8/frame5.png);
    background-size: cover;
    height: 100%;} */
</style>
    <div class="jumbotron">
      <h1 class="text-right"> Weather Station</h1>
      <h5 class="text-right">Personal weather station based on sensor Bosch BME680</h5>
    </div>
  </div>

<div class="container">
  <h2>Temperature:</h2>
  <h3 id="temp"></h3>
  <h2>Humidity:</h2>
  <h3 id="hum"></h3>
  <h2>Other thing:</h2>
  <h3 id="pres"></h3>
</div>
  <!-- fin jumbotron   -->

  <!-- Carousel -->
  <div class="container">
    <h4 class="text-center">Charts</h4>
    <div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="false">
      <!-- Indicators -->
      <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
        <li data-target="#myCarousel" data-slide-to="2"></li>
        <li data-target="#myCarousel" data-slide-to="3"></li>

      </ol>

      <!-- Wrapper for slides -->
      <div class="carousel-inner">

        <div class="item active">
          <img src="https://cdn.pixabay.com/photo/2020/04/22/16/05/los-angeles-5078872__340.jpg" alt="Los Angeles" style="width:100%;">
          <div class="carousel-caption">
            <h3>Los Angeles</h3>
            <p>LA is always so much fun!</p>
          </div>
        </div>

        <div class="item">
          <img src="https://www.urban-hub.com/wp/wp-content/uploads/2020/03/Chicago_City_Keyvisual_Teaser.jpg" alt="Chicago" style="width:100%;">
          <div class="carousel-caption">
            <h3>Chicago</h3>
            <p>Thank you, Chicago!</p>
          </div>
        </div>

        <div class="item">
          <img src="https://newsdigitaltv.com/wp-content/uploads/2021/04/manza.jpg" alt="New York" style="width:100%;">
          <div class="carousel-caption">
            <h3>New York</h3>
            <p>We love the Big Apple!</p>
          </div>
        </div>

        <!-- item de prueba -->
        <div class="item">
          <!-- <img src="https://newsdigitaltv.com/wp-content/uploads/2021/04/manza.jpg" alt="New York" style="width:100%;"> -->
          <div id="chart-temperature" class="container"></div><br>
          <div class="carousel-caption">
            <h3>Temperature</h3>
            <!-- <p>We love the Big Apple!</p> -->
          </div>
        </div>
        <!-- /////////////////////// -->
      </div>

      <!-- Left and right controls -->
      <a class="left carousel-control" href="#myCarousel" data-slide="prev">
  <span class="glyphicon glyphicon-arrow-left"></span>
  <span class="sr-only">Previous</span>
</a>
<a class="right carousel-control" href="#myCarousel" data-slide="next">
  <span class="glyphicon glyphicon-arrow-right"></span>
  <span class="sr-only">Next</span>
</a>
      <!-- <a class="left carousel-control" href="#myCarousel" data-slide="prev">
        <span class="glyphicon glyphicon-backward"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="right carousel-control" href="#myCarousel" data-slide="next">
        <span class="glyphicon glyphicon-forward"></span>
        <span class="sr-only">Next</span>
      </a> -->
    </div>
  </div>


  <script src="jquery.min.js"></script>
  <script src="bootstrap.min.js"></script>
</body>

<!-- script temperature -->
<script>
  var chartT = new Highcharts.Chart({
    chart: {
      renderTo: 'chart-temperature',
      backgroundColor: '#FCFFC5'
    },
    title: {
      text: 'BME680 Temperature Chart'
    },
    series: [{
      showInLegend: false,
      data: []
    }],
    plotOptions: {
      line: {
        animation: true,
        dataLabels: {
          enabled: true
        }
      },
      series: {
        color: '#059e8a'
      }
    },
    xAxis: {
      type: 'datetime',
      dateTimeLabelFormats: {
        second: '%H:%M:%S'
      }
    },
    yAxis: {
      title: {
        text: 'Temperature in Celsius'
      }
    },
    credits: {
      enabled: false
    }
  });
  setInterval(function() {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
        var x = (new Date()).getTime(),
          y = parseFloat(this.responseText);

        if (chartT.series[0].data.length > 40) {
          chartT.series[0].addPoint([x, y], true, true, true);
        } else {
          chartT.series[0].addPoint([x, y], true, false, true);
        }
      }
    };
    xhttp.open("GET", "/temperature", true);
    xhttp.send();
  }, 2000);
</script>
<!-- **********Script reception data*********** -->
<script>
  function renew() {
    fetch('/info').then(function(response) {
      return response.json();
    }).then(function(array) {
      var elem = document.querySelector('#temp');
      array[2] != 'nan' ? elem.innerHTML = array[0] + 'Â°C' : elem.innerHTML = '---------';
      elem = document.querySelector('#hum');
      array[2] != 'nan' ? elem.innerHTML = array[1] + ' %' : elem.innerHTML = 'Fehler';
      elem = document.querySelector('#pres');
      array[2] != 'nan' ? elem.innerHTML = array[2] + ' hPa' : elem.innerHTML = '---------';
    });
  }
  document.addEventListener('DOMContentLoaded', renew);
  setInterval(renew, 1000)
</script>
<!-- ********************* -->
<!-- ********************* -->
<!-- ********************* -->
<!-- ********************* -->
<!-- ********************* -->
<!-- ********************* -->
<!-- ********************* -->
<!-- ********************* -->
<!-- ********************* -->


</html>
